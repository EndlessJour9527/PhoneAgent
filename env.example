# ============================================
# PhoneAgent 配置文件模板
# ============================================
# 
# 使用方法:
# 1. 复制此文件为 .env
#    cp env.example .env
# 
# 2. 填入必要配置（⭐标记的项）
# 
# 3. 重启服务生效
# ============================================

# ============================================
# ⭐ 必要配置（必须填写）
# ============================================

# 智谱 AI API Key（必需）⭐
# 获取地址: https://open.bigmodel.cn/
# 示例格式：ZHIPU_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxx.yyyyyyyyyyyyyyyy
ZHIPU_API_KEY=

# ============================================
# 可选配置（根据需要修改）
# ============================================

# ----------------
# AI 模型配置
# ----------------

# 智谱 AI 语音识别 API Key（可选，留空则使用 ZHIPU_API_KEY）
# 用于：语音转文字（STT）
ZHIPU_SPEECH_API_KEY=

# ✅ 模型提供商（支持多平台）
# ----------------------------------------------------------------
# 支持: zhipu(智谱AI), openai(OpenAI), gemini(Google Gemini), qwen(通义千问)
# 默认: zhipu
MODEL_PROVIDER=zhipu

# ✅ 自定义 base_url（可选）
# ----------------------------------------------------------------
# 如果不设置，会根据 MODEL_PROVIDER 自动选择：
#   - zhipu:  https://open.bigmodel.cn/api/paas/v4/
#   - openai: https://api.openai.com/v1
#   - gemini: https://generativelanguage.googleapis.com/v1beta/openai
#   - qwen:   https://dashscope.aliyuncs.com/compatible-mode/v1
# 
# 自定义示例（取消注释使用）:
# CUSTOM_BASE_URL=https://api.openai.com/v1

# ✅ 自定义 API Key（可选，用于非智谱AI平台）
# ----------------------------------------------------------------
# 优先级: CUSTOM_API_KEY > ZHIPU_API_KEY
# 
# OpenAI 示例:
# CUSTOM_API_KEY=sk-proj-xxxxx
# 
# Google Gemini 示例:
# CUSTOM_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXX
# 
# 通义千问 示例:
# CUSTOM_API_KEY=sk-xxxxx

# ✅ 自定义默认模型名称（可选）
# ----------------------------------------------------------------
# 如果不设置，默认使用 autoglm-phone（官方推荐，针对手机优化）
# 
# 智谱AI模型示例:
# CUSTOM_MODEL_NAME=autoglm-phone         # 默认，官方Phone模型（免费）
# CUSTOM_MODEL_NAME=glm-4.6v-flash        # 最新Flash版（免费）
# CUSTOM_MODEL_NAME=glm-4.6v              # 旗舰模型（付费）
# CUSTOM_MODEL_NAME=glm-4.6v-flashx       # 极速版（付费）
#
# 其他平台示例:
# CUSTOM_MODEL_NAME=gpt-4o                # OpenAI
# CUSTOM_MODEL_NAME=gemini-2.0-flash      # Google Gemini
# CUSTOM_MODEL_NAME=qwen-vl-plus          # 通义千问
# ----------------------------------------------------------------

# 🆕 智能模型选择（高级配置）
# ----------------------------------------------------------------
# 配置优先级（从高到低）：
#   1. CUSTOM_MODEL_NAME（所有模式使用同一模型）
#   2. VISION_KERNEL_MODEL, PLANNING_KERNEL_MODEL（分别配置）
#   3. MODEL_PROVIDER 自动选择（根据提供商）
#   4. 默认策略：autoglm-phone
#
# 示例1: 所有模式使用 GPT-4o
# CUSTOM_MODEL_NAME=gpt-4o
#
# 示例2: 分别配置不同模式
# VISION_KERNEL_MODEL=autoglm-phone       # 逐步执行模式
# PLANNING_KERNEL_MODEL=glm-4.6v-flash    # 智能规划模式
#
# 默认策略（MODEL_PROVIDER=zhipu 且未设置上述变量时）：
#   - 逐步执行模式 → autoglm-phone（官方推荐，手机优化）
#   - 智能规划模式 → autoglm-phone（针对手机优化）
# ----------------------------------------------------------------

# 模型输出Token限制（默认：3000，建议保持默认）
MAX_TOKENS=3000

# 模型温度参数（默认：0.7，取值0-1，越高越随机）
TEMPERATURE=0.7

# ✅ 任务执行配置
MAX_TASK_STEPS=100                    # 最大执行步数（1-200，默认100）

# ----------------
# CORS 跨域配置
# ----------------

# 允许访问 API 的前端域名（逗号分隔）
# 开发环境示例：http://localhost:5173,http://127.0.0.1:5173
# 生产环境示例：https://你的域名.com
CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# ----------------
# 服务器配置
# ----------------

# 服务器监听地址（默认：0.0.0.0，监听所有网卡）
SERVER_HOST=0.0.0.0

# FRP 服务器端口（默认：7000）
FRP_PORT=7000

# WebSocket 服务器端口（默认：9999）
WEBSOCKET_PORT=9999

# WebSocket 服务器地址（默认：127.0.0.1）
# 如果API服务器和WebSocket服务器在同一台机器，使用 127.0.0.1
# 如果分开部署，填写WebSocket服务器的实际IP地址
WEBSOCKET_HOST=127.0.0.1

# ----------------
# 前端开发配置
# ----------------

# 后端API服务器地址（前端开发时使用）
# 本地开发：localhost
# 远程开发：填写服务器IP地址
VITE_API_HOST=localhost
VITE_API_PORT=8000
VITE_WS_PORT=9999

# ----------------
# 设备配置
# ----------------

# 最大设备数量（默认：100台）
# 扩展配置:
#   - 100台: 默认配置即可
#   - 200台: 需同步修改 server/frps.ini 中的 max_pool_count=400, allow_ports=6100-6299
MAX_DEVICES=100

# 设备健康检查间隔（秒，默认：60秒）
# 设备较多时可适当增加间隔（如60-120秒）
HEALTH_CHECK_INTERVAL=60

# ----------------
# 日志配置
# ----------------

# 日志级别（默认：INFO）
# 可选：DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# 日志文件路径（默认：logs/phoneagent.log）
LOG_FILE=logs/phoneagent.log

# ============================================
# 高级配置（一般无需修改）
# ============================================

# ADB 超时时间（秒，默认：30）
ADB_TIMEOUT=30

# 截图超时时间（秒，默认：30）
SCREENSHOT_TIMEOUT=30

# 任务超时时间（秒，默认：300）
TASK_TIMEOUT=300

# ============================================
# 说明文档
# ============================================
#
# 💡 快速开始：
#   1. 只需填写 ZHIPU_API_KEY
#   2. 其他配置保持默认即可（默认使用 autoglm-phone 模型）
#   3. 运行 ./scripts/server/start.sh 启动服务
#
# 🤖 模型说明：
#   - autoglm-phone: 官方Phone模型，免费，针对手机优化（默认）
#   - glm-4.6v-flash: 最新Flash版，免费，高性价比
#   - glm-4.6v: 旗舰模型，付费，最强性能
#   - glm-4.6v-flashx: 极速版，付费，快速响应
#
# ⚠️ 注意事项：
#   - YADB功能会自动检测并使用（无需手动配置路径）
#   - 支持逐步执行和智能规划两种模式
#   - 智能规划模式（Beta）需在前端手动选择
#   - 如遇问题，请查看 logs/phoneagent.log 日志
#
# ============================================
